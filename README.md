# Getting Started

A template for kick starting a Cloudflare worker that protects some URL by verifying a JWT generated by the Lit Protocol using Javascript

## How this works

This CF worker will check for a `jwt` query parameter and verify that it was signed by the Lit Protocol. If the JWT is valid, the worker will return a 302 redirect to a protected URL. If the JWT is invalid, the worker will return a 401 response.

## Usage

You will need Cloudflare Wrangler to build and deploy this. Install it using the instructions here: https://developers.cloudflare.com/workers/cli-wrangler/install-update

After installing it, run "wrangler login" to log in to your cloudflare account.

Next, open index.js. Every line that has a comment that starts with "LIT Developers" is something you should look at.

Specifically, you should set the `protectedUrl` variable on line 22 to the final URL you want to send your users to, if they authenticate successfully.

## Building and Deploying on cloudflare

With `wrangler`, you can build, test, and deploy your Worker with the following commands:

```bash
# builds your project with webpack
wrangler build

# run your Worker in an ideal development workflow (with a local server, file watcher & more)
wrangler dev

# deploy your Worker globally to the Cloudflare network (update your wrangler.toml file for configuration)
wrangler publish
```
